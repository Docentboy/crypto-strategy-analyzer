# Crypto Strategy Analyzer

**Crypto Strategy Analyzer** — это Spring Boot-приложение для симуляции криптовалютных стратегий на основе исторических данных.  
На текущем этапе реализована стратегия **ежедневной ребалансировки** портфеля по заданным весам.

---

## Стек технологий

- Java 21
- Spring Boot 3
- Spring Data JPA (Hibernate)
- PostgreSQL
- REST API (JSON)
- Lombok
- SLF4J (логирование в файл)
- Maven
- Binance API

---

## Возможности

- Загрузка котировок криптовалют (свечей 1D) с Binance
- Сохранение котировок в PostgreSQL
- Ребалансировка портфеля по цене закрытия каждый день
- Симуляция стратегии на историческом интервале
- REST API для запуска симуляции и получения результатов
- Расчёт итоговой стоимости, прироста капитала и прироста каждого актива в портфеле

---

## API

### `POST /api/simulation`

#### Тело запроса:
```json
{
  "start": "2023-01-01",
  "end": "2024-01-01",
  "initialUsd": 1000,
  "weights": {
    "BTCUSDT": 0.25,
    "ETHUSDT": 0.25,
    "USDT": 0.5
  }
}
```

#### Пример ответа:
```json
{
  "startHoldings": {
    "BTCUSDT": 0.01111018,
    "ETHUSDT": 0.15917806,
    "USDT": 680.0
  },
  "finalHoldings": {
    "BTCUSDT": 0.01788606,
    "ETHUSDT": 0.23255051,
    "USDT": 374.6562
  },
  "profitsBasis": "percent of asset quantity",
  "profits": {
    "BTCUSDT": 60.96,
    "ETHUSDT": 46.04,
    "USDT": -44.9
  },
  "totalValue": 1101.93,
  "totalIncome": 101.93,
  "totalIncomePercent": 10.19
}
```

---

## Описание стратегии

1. На каждый день симуляции запрашивается `close`-цена активов.
2. Все текущие активы **продаются в USD**.
3. USD перераспределяется **согласно заданным весам**.
4. Процесс повторяется ежедневно, в рамках указанного периода.

---

## Настройка и запуск

1. Установить PostgreSQL, создать БД `crypto_db`
2. Указать параметры подключения в `application.properties`
3. Скачать проект:
```bash
git clone https://github.com/Docentboy/crypto-strategy-analyzer
cd crypto-strategy-analyzer
```
4. Собрать и запустить:
```bash
./mvnw spring-boot:run
```

---

## Структура проекта

- `entity/` — JPA-сущности (CryptoCandle, Portfolio и др.)
- `service/` — бизнес-логика
- `client/` — подключение к Binance API
- `controller/` — REST API
- `dto/` — DTO-классы для входящих/исходящих данных

---

## TODO / планы

- [ ] Проверки на некорректность входных данных: Даты
- [ ] Вынести поддерживаемые валютные пары в конфиги
- [ ] Атоматизировать запрос котировок за нужный период в случае их отсутствия
- [ ] Расширение набора стратегий

---

## Разработано в рамках промежуточной аттестации

Финальная Аттестация: *Клиент-серверные приложения на Java. Веб-разработка*

**Руководитель проекта / Team lead:** Дамир Гирфанов